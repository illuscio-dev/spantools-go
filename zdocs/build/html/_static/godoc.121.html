<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="theme-color" content="#375EAB">

  <title>agg - Go Documentation Server</title>

<link type="text/css" rel="stylesheet" href="style.css">

<script>window.initFuncs = [];</script>
<script src="jquery.js" defer></script>



<script>var goVersion = "go1.13.5";</script>
<script src="godocs.js" defer></script>
</head>
<body>

<div id='lowframe' style="position: fixed; bottom: 0; left: 0; height: 0; width: 100%; border-top: thin solid grey; background-color: white; overflow: auto;">
...
</div><!-- #lowframe -->

<div id="topbar" class="wide"><div class="container">
<div class="top-heading" id="heading-wide"><a href="godoc.590.html">Go Documentation Server</a></div>
<div class="top-heading" id="heading-narrow"><a href="godoc.590.html">GoDoc</a></div>
<a href="godoc.121.html#" id="menu-button"><span id="menu-button-arrow">&#9661;</span></a>
<form method="GET" action="http://localhost:6161/search">
<div id="menu">

<span class="search-box"><input type="search" id="search" name="q" placeholder="Search" aria-label="Search" required><button type="submit"><span><!-- magnifying glass: --><svg width="24" height="24" viewBox="0 0 24 24"><title>submit search</title><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/><path d="M0 0h24v24H0z" fill="none"/></svg></span></button></span>
</div>
</form>

</div></div>



<div id="page" class="wide">
<div class="container">


  <h1>
    Command agg
    <span class="text-muted"></span>
  </h1>







<div id="nav"></div>


<!--
	Copyright 2009 The Go Authors. All rights reserved.
	Use of this source code is governed by a BSD-style
	license that can be found in the LICENSE file.
-->
<!--
	Note: Static (i.e., not template-generated) href and id
	attributes start with "pkg-" to make it impossible for
	them to conflict with generated attributes (some of which
	correspond to Go identifiers).
-->

	<script>
	document.ANALYSIS_DATA = null;
	document.CALLGRAPH = null;
	</script>

	
		
		<p>
Agg computes aggregate values over tabular text.
It behaves somewhat like the SQL &ldquo;GROUP BY&rdquo; clause.
</p>
<p>
Usage:
</p>
<pre>agg [function...]
</pre>
<p>
It reads input from stdin as a sequence of records, one per line.
It treats each line as a set of fields separated by white space.
One field (the first, by default) is designated as the key.
Successive lines with equal keys are grouped into a group,
and agg produces one line of output for each group.
(Note that only contiguous input lines can form a group.
If you need to make sure that all records for a given key
are grouped together, sort the input first.)
</p>
<p>
For each remaining field,
agg applies a function to all the values in the group,
producing a single output value.
The command line arguments specify which functions to use,
one per field in the input table.
</p>
<h3 id="hdr-Functions">Functions</h3>
<p>
The available functions are:
</p>
<pre>key        group by this field (default for field 1)
first      value from first line of group (default for rest)
last       value from last line of group
sample     value from any line of group, uniformly at random
prefix     longest common string prefix
join:sep   concatenate strings with given sep
smin       lexically least string
smax       lexically greatest string
min        numerically least value
max        numerically greatest value
sum        numeric sum
mean       arithmetic mean
count      number of records (ignores input value)
const:val  print val, ignoring input
drop       omit the column entirely
</pre>
<p>
The numeric functions skip items that don&#39;t parse as numbers.
</p>
<h3 id="hdr-Examples">Examples</h3>
<p>
Using the following input:
</p>
<pre>$ cat &gt;input
-rwx   alice      100   /home/alice/bin/crdt
-rw-   alice   210002   /home/alice/thesis.tex
-rw-   bob      10051   /home/bob/expenses.tab
-rwx   kr      862060   /home/kr/bin/blog
-rwx   kr      304608   /home/kr/bin/agg
</pre>
<p>
Disk usage for each user, plus where that disk usage occurs
(longest common prefix of filesystem paths):
</p>
<pre>$ agg &lt;input drop key sum prefix
alice	210153	/home/alice/
bob	10051	/home/bob/expenses.tab
kr	1166668	/home/kr/
</pre>
<p>
Disk usage for executable vs non-executable files:
</p>
<pre>$ sort input | agg key drop sum join:,
-rw-	220053	/home/alice/thesis.tex,/home/bob/expenses.tab
-rwx	1166768	/home/alice/bin/crdt,/home/kr/bin/agg,/home/kr/bin/blog
</pre>

	

	







<div id="footer">
Build version go1.13.5.<br>
Except as <a href="https://developers.google.com/site-policies#restrictions">noted</a>,
the content of this page is licensed under the
Creative Commons Attribution 3.0 License,
and code is licensed under a <a href="http://localhost:6161/LICENSE">BSD license</a>.<br>
<a href="http://localhost:6161/doc/tos.html">Terms of Service</a> |
<a href="http://www.google.com/intl/en/policies/privacy/">Privacy Policy</a>
</div>

</div><!-- .container -->
</div><!-- #page -->
</body>
</html>
